# HG changeset patch
# Date 1703510463 -7200
#      Mon Dec 25 15:21:03 2023 +0200
# Branch py3.9
# Node ID bedf30f142e821a853b50fd75e6c4195225dd170
# Parent  eb0e00489863414022d3dadbafdd9d2fb6ad8c0f
bumpy minimum macos version support to 10.13 for hpy

diff -r eb0e00489863 -r bedf30f142e8 lib_pypy/_sysconfigdata.py
--- a/lib_pypy/_sysconfigdata.py    Mon Dec 25 13:47:55 2023 +0200
+++ b/lib_pypy/_sysconfigdata.py    Mon Dec 25 15:21:03 2023 +0200
@@ -97,5 +97,5 @@
     #
     # In any case, keep this in sync with DARWIN_VERSION_MIN in
     # rpython/translator/platform/darwin.py and Lib/_osx_support.py
-    build_time_vars['MACOSX_DEPLOYMENT_TARGET'] = '10.9'
+    build_time_vars['MACOSX_DEPLOYMENT_TARGET'] = '10.13'
 
diff -r eb0e00489863 -r bedf30f142e8 rpython/translator/platform/darwin.py
--- a/rpython/translator/platform/darwin.py Mon Dec 25 13:47:55 2023 +0200
+++ b/rpython/translator/platform/darwin.py Mon Dec 25 15:21:03 2023 +0200
@@ -14,7 +14,7 @@
 # Keep in sync with MACOSX_DEPLOYMENT_TARGET, for pypy see
 # lib_pypy/_sysconfigdata.py
 #
-DARWIN_VERSION_MIN = '-mmacosx-version-min=10.9'
+DARWIN_VERSION_MIN = '-mmacosx-version-min=10.13'
 
 class Darwin(posix.BasePosix):
     name = "darwin"

# HG changeset patch
# User Matti Picus
# Date 1703572834 -7200
#      Tue Dec 26 08:40:34 2023 +0200
# Branch py3.9
# Node ID ffffffffffffffffffffffffffffffffffffffff
# Parent  bedf30f142e821a853b50fd75e6c4195225dd170


diff -r bedf30f142e8 rpython/translator/c/src/precommondefs.h
--- a/rpython/translator/c/src/precommondefs.h	Mon Dec 25 15:21:03 2023 +0200
+++ b/rpython/translator/c/src/precommondefs.h	Tue Dec 26 08:40:34 2023 +0200
@@ -8,8 +8,6 @@
 #define __PYPY_PRECOMMONDEFS_H
 
 
-/* Define on Darwin to activate all library features */
-#define _DARWIN_C_SOURCE 1
 /* This must be set to 64 on some systems to enable large file support. */
 #define _FILE_OFFSET_BITS 64
 /* Define on Linux to activate all library features */
@@ -18,13 +16,6 @@
 #define _LARGEFILE_SOURCE 1
 /* Define on NetBSD to activate all library features */
 #define _NETBSD_SOURCE 1
-/* Define to activate features from IEEE Stds 1003.1-2008, except on
-   macOS where it hides a lot symbols */
-#ifndef __APPLE__
-#  ifndef _POSIX_C_SOURCE
-#    define _POSIX_C_SOURCE 200809L
-#  endif
-#endif
 /* Define on FreeBSD to activate all library features */
 #define __BSD_VISIBLE 1
 #define __XSI_VISIBLE 700

